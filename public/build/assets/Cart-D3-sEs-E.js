import{j as k,Z as v,d as p,k as y,T as C,_ as T,o as i,e as l,a as r,t as m,f as g,b as x,w as b,F as w,h as S,g as A,a9 as D,a2 as F,i as L}from"./app-D5VBnFMW.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={props:{cart:Array,items:Array,totalprice:Number,guesttoken:String},components:{Link:k,Head:v},setup(f){const e=p(!1),c=()=>{e.value=!e.value},o=y(()=>{var t;return(t=f.cart)==null?void 0:t.reduce((s,d)=>s+Number(d.counter||0),0)}),u=p({}),a=C({price:"",item_id:"",name:"",counter:""});return{showCart:e,toggleCart:c,counters:u,form:a,submit:(t,s,d)=>{const _=u.value[t];if(!_){console.error(`Price is required for item ${s}`);return}a.item_id=t,a.name=s,a.price=d,a.counter=_,console.log(`Submitting for item: ${s} with price: ${d} and ID: ${t}`),a.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${s} was successful.`)}})},removecartitem:t=>{F.delete(route("purchase.destroy",{purchase:t}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${t} removed from cart`),onError:s=>console.error(s)})},totalTickets:o}}},j={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center"},B={key:0,class:"fixed right-4 top-20 mt-2 w-72 h-fit bg-white border border-gray-200 rounded-[35px] shadow-lg overflow-scroll z-[999]"},$={class:"p-4"},E={class:"flex items-center mb-4"},q=["src"],z={class:"ml-4"},H={class:"text-sm font-medium"},I={class:"text-xs text-gray-500"},M=["onClick"],P={class:"border-t border-gray-200 px-4 py-3"};function R(f,e,c,o,u,a){const h=T("Link");return i(),l(w,null,[r("a",{onClick:e[0]||(e[0]=(...n)=>o.toggleCart&&o.toggleCart(...n)),class:"fixed top-5 right-5 bg-white shadow-lg shadow-black/20 h-16 w-16 rounded-full flex items-center justify-center cursor-pointer"},[e[1]||(e[1]=r("span",{class:"material-symbols-outlined"},"shopping_basket",-1)),o.totalTickets>0?(i(),l("span",j,m(o.totalTickets),1)):g("",!0)]),x(D,{name:"fade-slide"},{default:b(()=>[o.showCart&&Array.isArray(c.cart)&&c.cart.length>0?(i(),l("div",B,[(i(!0),l(w,null,S(c.cart,n=>(i(),l("div",$,[r("div",E,[r("img",{src:`/storage/${n.items.file_path}`,class:"w-12 h-12 rounded-md"},null,8,q),r("div",z,[r("h3",H,m(n.name),1),r("p",I,m(n.counter)+" Ticket(s)",1),r("a",{onClick:L(t=>o.removecartitem(n.id),["prevent"]),class:"text-xs text-red-500 cursor-pointer"},"Remove",8,M)])])]))),256)),r("div",P,[x(h,{href:"/cart",class:"btn btn--primary w-fit"},{default:b(()=>e[2]||(e[2]=[A(" Checkout ")])),_:1})])])):g("",!0)]),_:1})],64)}const J=N(V,[["render",R],["__scopeId","data-v-a7faec06"]]);export{J as C};
