import{j as y,d as g,T as x,Y as l,c as k,w as m,a1 as w,o as n,a as e,b as _,e as d,h as C,F as $,t as f,g as L,i as P,l as S,$ as A}from"./app-ChUJ2Xaz.js";import{C as B}from"./Container-BJPsWTsG.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as V}from"./Cart-DbL_utvq.js";import{_ as j}from"./AppLayout-8A-doVuo.js";const F={props:{items:Array,cart:Array,totalprice:Number},components:{Container:B,Cart:V,AppLayout:j,Link:y},setup(){const u=g({}),o=x({price:"",item_id:"",name:"",counter:""});return{counters:u,form:o,submit:(s,r,c)=>{const i=u.value[s];if(!i){console.error(`Price is required for item ${r}`);return}o.item_id=s,o.name=r,o.price=c,o.counter=i,console.log(`Submitting for item: ${r} with price: ${c} and ID: ${s}`),o.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${r} was successful.`)}})},removecartitem:s=>{w.delete(route("purchase.destroy",{purchase:s}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${s} removed from cart`),onError:r=>console.error(r)})}}}},T={class:"py-32"},M={class:"relative"},N={class:"flex flex-wrap -mr-6"},E={class:"mr-6 p-6 border border-black/20 rounded-3xl relative"},U={key:0},q=["src"],I={key:1},Y=["onSubmit"],z={class:"flex flex-row gap-4"},G=["onUpdate:modelValue"],H=["disabled"];function J(u,o,p,a,s,r){const c=l("Cart"),i=l("Link"),b=l("Container"),v=l("AppLayout");return n(),k(v,{title:"Purchase"},{default:m(()=>[e("div",T,[_(b,{class:"bg-gray-100 !py-4 p-10 rounded-3xl"},{default:m(()=>[o[1]||(o[1]=e("h1",{class:"text-4xl font-bold"},"Purchase Page",-1)),o[2]||(o[2]=e("div",{class:"pb-8"},"This is the purchase page content inside the container.",-1)),e("div",M,[_(c,{cart:p.cart},null,8,["cart"])]),e("div",N,[(n(!0),d($,null,C(p.items,t=>(n(),d("div",{class:"w-1/3",key:t},[e("div",E,[_(i,{href:`/purchase/${t.id}`,class:"absolute -top-4 -right-4 border bg-black/20 border-black/20 w-10 h-10 flex items-center justify-center rounded-full"},{default:m(()=>o[0]||(o[0]=[e("span",{class:"material-symbols-outlined text-black/80"},"north_east",-1)])),_:2},1032,["href"]),t.file_path?(n(),d("div",U,[e("img",{src:`/storage/${t.file_path}`,alt:"Module Image",class:"h-40 w-full object-cover object-center rounded-3xl mb-4"},null,8,q)])):(n(),d("div",I," No image available ")),e("div",null,"Product: "+f(t.name),1),e("span",null,"Price: "+f(t.price),1),L(" "+f(t.max)+" ",1),e("form",{onSubmit:P(h=>a.submit(t.id,t.name,t.price),["prevent"]),class:"space-y-6"},[e("div",z,[S(e("input",{"onUpdate:modelValue":h=>a.counters[t.id]=h,id:"counter",type:"number",class:"w-full main--input"},null,8,G),[[A,a.counters[t.id]]]),e("button",{disabled:a.form.processing,type:"submit",class:"btn btn--primary"},"Buy",8,H)])],40,Y)])]))),128))])]),_:1})])]),_:1})}const X=D(F,[["render",J]]);export{X as default};
