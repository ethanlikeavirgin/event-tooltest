import{j as k,Z as w,d as C,T as $,q as h,e as n,b as _,a as e,w as f,F as b,N as S,o as a,g as v,t as i,h as g,i as x,l as D,x as L}from"./app-CyxmPji5.js";import{C as P}from"./Container-C5l9_gsQ.js";import{_ as T}from"./AppLayout-CQ7vmf8i.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={props:{items:Array,cart:Array,totalprice:Number,guesttoken:String},components:{Container:P,AppLayout:T,Link:k,Head:w},setup(){const p=C({}),s=$({price:"",item_id:"",name:"",counter:""});return{counters:p,form:s,submit:(o,r,u)=>{const l=p.value[o];if(!l){console.error(`Price is required for item ${r}`);return}s.item_id=o,s.name=r,s.price=u,s.counter=l,console.log(`Submitting for item: ${r} with price: ${u} and ID: ${o}`),s.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${r} was successful.`)}})},removecartitem:o=>{S.delete(route("purchase.destroy",{purchase:o}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${o} removed from cart`),onError:r=>console.error(r)})}}}},B={class:"py-32"},F={class:"relative"},N={class:"fixed right-4 top-14 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-lg h-1/2 overflow-scroll"},A={class:"p-4"},H={class:"flex items-center mb-4"},M=["src"],q={class:"ml-4"},E={class:"text-sm font-medium"},U={class:"text-xs text-gray-500"},W=["onClick"],I={class:"border-t border-gray-200 px-4 py-3"},R={class:"flex flex-wrap -mr-6"},Z={class:"mr-6 p-6 border border-black/20 rounded-3xl relative"},z={key:0},G=["src"],J={key:1},K=["onSubmit"],O={class:"flex flex-row gap-4"},Q=["onUpdate:modelValue"],X=["disabled"];function Y(p,s,d,c,o,r){const u=h("Head"),l=h("Link"),y=h("Container");return a(),n(b,null,[_(u,{title:"Welcome"}),e("div",B,[_(y,{class:"bg-gray-100 !py-4 p-10 rounded-3xl"},{default:f(()=>[s[2]||(s[2]=e("h1",{class:"text-4xl font-bold"},"Purchase Page",-1)),s[3]||(s[3]=e("div",{class:"pb-8"},"This is the purchase page content inside the container.",-1)),v(" "+i(d.guesttoken)+" ",1),e("div",F,[e("div",N,[(a(!0),n(b,null,g(d.cart,t=>(a(),n("div",A,[e("div",H,[e("img",{src:`/storage/${t.items.file_path}`,class:"w-12 h-12 rounded-md"},null,8,M),e("div",q,[e("h3",E,i(t.name),1),e("p",U,i(t.counter)+" Ticket(s)",1),e("a",{onClick:x(m=>c.removecartitem(t.id),["prevent"]),class:"text-xs text-red-500 cursor-pointer"},"Remove",8,W)])])]))),256)),e("div",I,[_(l,{href:"/cart",class:"btn btn--primary"},{default:f(()=>s[0]||(s[0]=[v(" Checkout ")])),_:1})])])]),e("div",R,[(a(!0),n(b,null,g(d.items,t=>(a(),n("div",{class:"w-1/3",key:t},[e("div",Z,[_(l,{href:`/purchase/${t.id}`,class:"absolute -top-4 -right-4 border bg-black/20 border-black/20 w-10 h-10 flex items-center justify-center rounded-full"},{default:f(()=>s[1]||(s[1]=[e("span",{class:"material-symbols-outlined text-black/80"},"north_east",-1)])),_:2},1032,["href"]),t.file_path?(a(),n("div",z,[e("img",{src:`/storage/${t.file_path}`,alt:"Module Image",class:"h-40 w-full object-cover object-center rounded-3xl mb-4"},null,8,G)])):(a(),n("div",J," No image available ")),e("div",null,"Product: "+i(t.name),1),e("span",null,"Price: "+i(t.price),1),v(" "+i(t.max)+" ",1),e("form",{onSubmit:x(m=>c.submit(t.id,t.name,t.price),["prevent"]),class:"space-y-6"},[e("div",O,[D(e("input",{"onUpdate:modelValue":m=>c.counters[t.id]=m,id:"counter",type:"number",class:"w-full main--input"},null,8,Q),[[L,c.counters[t.id]]]),e("button",{disabled:c.form.processing,type:"submit",class:"btn btn--primary"},"Buy",8,X)])],40,K)])]))),128))])]),_:1})])],64)}const re=V(j,[["render",Y]]);export{re as default};
