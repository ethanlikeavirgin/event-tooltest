import{o as u,e as p,$ as L,_,b as d,w as y,a as e,g as $,F as w,h as C,t as b,j as S,Z as F,d as j,T as A,a2 as B,i as M,l as V,a0 as q}from"./app-Cx_k3_Cc.js";import{C as k}from"./Container-DdE1o165.js";import{L as z,F as H}from"./FrontendLayout-D8yIurXy.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as P}from"./Cart-BkdBeC6j.js";import{_ as T}from"./AppLayout-paYi4DRq.js";const U={},D={class:"material-symbols-outlined"};function N(a,t){return u(),p("span",D,"check")}const O=x(U,[["render",N]]),E={props:{plans:Array},components:{Container:k},methods:{async purchasePlan(a){var c,r,s,i,o,m,g,v,n,h;const t=parseFloat(a.price),l={plan_id:a.id,first_name:((s=(r=(c=this.auth)==null?void 0:c.user)==null?void 0:r.name)==null?void 0:s.split(" ")[0])||"Guest",last_name:((m=(o=(i=this.auth)==null?void 0:i.user)==null?void 0:o.name)==null?void 0:m.split(" ")[1])||"User",email:((v=(g=this.auth)==null?void 0:g.user)==null?void 0:v.email)||"guest@example.com",total:t,items:[{name:a.name,price:a.price,quantity:1,total:t}]};try{const f=await L.post("/mollie/payment",l,{headers:{Accept:"application/json","X-Inertia":!1,"X-Requested-With":"XMLHttpRequest"}});(n=f.data)!=null&&n.checkoutUrl?window.location.href=f.data.checkoutUrl:console.error("No checkout URL returned from Mollie.")}catch(f){console.error("Error during Mollie payment:",((h=f.response)==null?void 0:h.data)||f.message)}}}},R={class:"py-32"},W={class:"grid grid-cols-12 gap-6"},X={class:"lg:col-span-4 md:col-span-6 col-span-12"},Z={class:"main-card primary"},K={class:"flex flex-row gap-2 items-end pt-4"},Q=["onClick"],G={class:"mt-8"},I=["innerHTML"];function J(a,t,l,c,r,s){const i=_("Container");return u(),p("section",R,[d(i,null,{default:y(()=>[t[1]||(t[1]=e("h2",{class:"text-center font-bold pb-24"},[$("Checkout our "),e("span",{class:"text-primary"},"prices")],-1)),e("div",W,[(u(!0),p(w,null,C(l.plans,o=>(u(),p("div",X,[e("div",Z,[e("span",null,b(o.name),1),e("div",K,[e("h2",null,"€ "+b(o.price),1),t[0]||(t[0]=e("span",null,"/once",-1))]),e("a",{class:"btn btn--white w-full mt-8 text-center !rounded-xl",onClick:m=>s.purchasePlan(o)},"Order now",8,Q),e("div",G,[e("div",{class:"plan-options",innerHTML:o.options},null,8,I)])])]))),256))])]),_:1})])}const Y=x(E,[["render",J]]),ee={props:{plans:Array,items:Array,cart:Array,totalprice:Number,guesttoken:String,auth:Object},components:{Container:k,Logo:z,Checkicon:O,Plans:Y,Cart:P,AppLayout:T,FrontendLayout:H,Link:S,Head:F},setup(){const a=j({}),t=A({price:"",item_id:"",name:"",counter:""});return{counters:a,form:t,submit:(r,s,i)=>{const o=a.value[r];if(!o){console.error(`Price is required for item ${s}`);return}t.item_id=r,t.name=s,t.price=i,t.counter=o,console.log(`Submitting for item: ${s} with price: ${i} and ID: ${r}`),t.post(route("purchase.store"),{preserveScroll:!0,preserveState:!0,forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${s} was successful.`)}})},removecartitem:r=>{B.delete(route("purchase.destroy",{purchase:r}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${r} removed from cart`),onError:s=>console.error(s)})}}}},te={class:"min-h-screen bg-cover bg-center w-full h-full flex items-center hero relative",style:{"background-image":"url('storage/files/1LNg0Sum6rv0fhoKVCFnhqScQuf2Bbrz7fZO1wh7.png')"}},se={class:"bg-cover bg-center bg-repeat-y w-full h-full hero alt relative",style:{"background-image":"url('storage/files/1LNg0Sum6rv0fhoKVCFnhqScQuf2Bbrz7fZO1wh7.png')"}},oe={class:"py-32"},ne={class:"relative z-10"},re={class:"grid grid-cols-12 gap-6"},ae={class:"lg:col-span-4 md:col-span-6 col-span-12"},le={class:"main-card third"},ce={class:"flex flex-row gap-2 items-end pt-4"},ie={class:"my-4"},de=["src"],ue={class:"mb-4"},pe=["onSubmit"],me={class:"flex flex-row justify-end ml-auto gap-4"},_e=["onUpdate:modelValue"],he=["disabled"];function fe(a,t,l,c,r,s){const i=_("Head"),o=_("FrontendLayout"),m=_("Container"),g=_("Plans"),v=_("Cart");return u(),p(w,null,[d(i,{title:"Welcome"}),d(o,{auth:l.auth},null,8,["auth"]),e("section",te,[d(m,null,{default:y(()=>t[0]||(t[0]=[e("div",{class:"relative z-10"},[e("h1",null,[e("span",{class:"font-bold"},"The smart way"),e("br"),e("span",{class:"font-bold"},"to ticket"),e("br"),e("span",{class:"font-bold"},"your"),$(" event ")])],-1),e("div",{class:"absolute z-10 bottom-20 max-w-6xl mx-auto sm:w-full w-fit flex md:flex-row flex-col md:gap-0 gap-4"},[e("a",{class:"btn btn-large btn--primary w-fit mr-6"},"Bekijk de events"),e("a",{class:"btn btn-large btn--white w-fit"},"Contacteer ons")],-1),e("div",{class:"fixed sm:right-5 right-5 sm:bottom-20 bottom-6 shadow-black/20 shadow-lg bg-white rounded-full w-16 h-16 z-50 flex items-center justify-center"},[e("span",{class:"material-symbols-outlined"},"local_activity")],-1)])),_:1})]),d(g,{plans:l.plans},null,8,["plans"]),e("section",se,[e("div",oe,[e("div",ne,[d(m,null,{default:y(()=>[t[1]||(t[1]=e("h2",{class:"text-black font-bold pb-24"},"Current events",-1)),e("div",re,[(u(!0),p(w,null,C(l.items,n=>(u(),p("div",ae,[e("div",le,[e("span",null,b(n.name),1),e("div",ce,[e("h2",null,"€ "+b(n.price),1)]),e("div",ie,[e("img",{src:"/storage/"+n.file_path,class:"h-40 w-full object-cover object-center rounded-[35px]"},null,8,de)]),e("div",ue,b(n.description),1),e("form",{onSubmit:M(h=>c.submit(n.id,n.name,n.price),["prevent"]),class:"space-y-6"},[e("div",me,[V(e("input",{placeholder:"Aantal","onUpdate:modelValue":h=>c.counters[n.id]=h,id:"counter",type:"number",class:"main--input counter"},null,8,_e),[[q,c.counters[n.id]]]),e("button",{disabled:c.form.processing,type:"submit",class:"btn btn--primary"},"Buy",8,he)])],40,pe)])]))),256))])]),_:1})])])]),d(v,{cart:l.cart},null,8,["cart"])],64)}const $e=x(ee,[["render",fe]]);export{$e as default};
