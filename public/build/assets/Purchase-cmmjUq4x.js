import{j as y,d as w,T as k,q as m,c as C,w as h,N as $,o as n,a as e,b as f,e as c,h as b,F as g,t as i,i as v,g as L,l as P,x as S}from"./app-CTnjk_Gi.js";import{C as B}from"./Container-D--0Fdgv.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as A}from"./AppLayout-DUzrsHeO.js";const D={props:{items:Array,cart:Array,totalprice:Number},components:{Container:B,AppLayout:A,Link:y},setup(){const u=w({}),t=k({price:"",item_id:"",name:"",counter:""});return{counters:u,form:t,submit:(s,r,l)=>{const d=u.value[s];if(!d){console.error(`Price is required for item ${r}`);return}t.item_id=s,t.name=r,t.price=l,t.counter=d,console.log(`Submitting for item: ${r} with price: ${l} and ID: ${s}`),t.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${r} was successful.`)}})},removecartitem:s=>{$.delete(route("purchase.destroy",{purchase:s}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${s} removed from cart`),onError:r=>console.error(r)})}}}},T={class:"py-32"},j={class:"relative"},F={class:"fixed right-4 top-14 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-lg h-1/2 overflow-scroll"},N={class:"p-4"},M={class:"flex items-center mb-4"},q=["src"],E={class:"ml-4"},U={class:"text-sm font-medium"},I={class:"text-xs text-gray-500"},R=["onClick"],z={class:"flex flex-wrap -mr-6"},G={class:"mr-6 p-6 border border-black/20 rounded-3xl relative"},H={key:0},J=["src"],K={key:1},O=["onSubmit"],Q={class:"flex flex-row gap-4"},W=["onUpdate:modelValue"],X=["disabled"];function Y(u,t,p,a,s,r){const l=m("Link"),d=m("Container"),x=m("AppLayout");return n(),C(x,{title:"Purchase"},{default:h(()=>[e("div",T,[f(d,{class:"bg-gray-100 !py-4 p-10 rounded-3xl"},{default:h(()=>[t[2]||(t[2]=e("h1",{class:"text-4xl font-bold"},"Purchase Page",-1)),t[3]||(t[3]=e("div",{class:"pb-8"},"This is the purchase page content inside the container.",-1)),e("div",j,[e("div",F,[(n(!0),c(g,null,b(p.cart,o=>(n(),c("div",N,[e("div",M,[e("img",{src:`/storage/${o.items.file_path}`,class:"w-12 h-12 rounded-md"},null,8,q),e("div",E,[e("h3",U,i(o.name),1),e("p",I,i(o.counter)+" Ticket(s)",1),e("a",{onClick:v(_=>a.removecartitem(o.id),["prevent"]),class:"text-xs text-red-500 cursor-pointer"},"Remove",8,R)])])]))),256)),t[0]||(t[0]=e("div",{class:"border-t border-gray-200 px-4 py-3"},[e("button",{class:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Checkout "),e("a",{href:"#",class:"block text-center text-sm text-indigo-600 mt-3 hover:underline"}," View Shopping Bag ")],-1))])]),e("div",z,[(n(!0),c(g,null,b(p.items,o=>(n(),c("div",{class:"w-1/3",key:o},[e("div",G,[f(l,{href:`/purchase/${o.id}`,class:"absolute -top-4 -right-4 border bg-black/20 border-black/20 w-10 h-10 flex items-center justify-center rounded-full"},{default:h(()=>t[1]||(t[1]=[e("span",{class:"material-symbols-outlined text-black/80"},"north_east",-1)])),_:2},1032,["href"]),o.file_path?(n(),c("div",H,[e("img",{src:`/storage/${o.file_path}`,alt:"Module Image",class:"h-40 w-full object-cover object-center rounded-3xl mb-4"},null,8,J)])):(n(),c("div",K," No image available ")),e("div",null,"Product: "+i(o.name),1),e("span",null,"Price: "+i(o.price),1),L(" "+i(o.max)+" ",1),e("form",{onSubmit:v(_=>a.submit(o.id,o.name,o.price),["prevent"]),class:"space-y-6"},[e("div",Q,[P(e("input",{"onUpdate:modelValue":_=>a.counters[o.id]=_,id:"counter",type:"number",class:"w-full main--input"},null,8,W),[[S,a.counters[o.id]]]),e("button",{disabled:a.form.processing,type:"submit",class:"btn btn--primary"},"Buy",8,X)])],40,O)])]))),128))])]),_:1})])]),_:1})}const se=V(D,[["render",Y]]);export{se as default};
