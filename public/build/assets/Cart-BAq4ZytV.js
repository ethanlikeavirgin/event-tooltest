import{d,k,q as x,c as _,w as v,s as g,o as c,a as n,t as r,e as p,h as y,F as b,g as C,l as m,x as u,i as N}from"./app-BuyvVIAo.js";import{C as w}from"./Container-Co7CpRNk.js";import{_ as U}from"./AppLayout-BZP57HEJ.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={props:{guest_token:Object,cartitems:Array},components:{Container:w,AppLayout:U},setup(s){const t=d(""),l=d(""),o=k(()=>s.cartitems.reduce((i,a)=>i+a.items.price*a.counter,0));return{submit:async()=>{var a;const i={first_name:t.value,last_name:l.value,email:email.value,items:s.cartitems.map(e=>({item_id:e.id,name:e.name,price:e.items.price,counter:e.counter,line_total:e.items.price*e.counter})),total:o.value,guest_token:s.guest_token};try{const e=await g.post("/mollie/payment",i);console.log("Mollie response:",e),(a=e.data)!=null&&a.checkoutUrl?window.open(e.data.checkoutUrl,"_blank"):console.error("Geen checkout URL ontvangen van Mollie.")}catch(e){console.error("Fout bij Mollie betaling:",e)}},totalPrice:o,firstName:t,lastName:l,email}}};function F(s,t,l,o,f,i){const a=x("Container");return c(),_(a,null,{default:v(()=>[n("div",null,r(l.guest_token),1),(c(!0),p(b,null,y(l.cartitems,e=>(c(),p("div",{key:e.id},r(e.name)+" - "+r(e.counter)+" x "+r(e.items.price)+" = â‚¬ "+r((e.counter*e.items.price).toFixed(2)),1))),128)),n("p",null,[t[4]||(t[4]=n("strong",null,"Totaal:",-1)),C(" â‚¬"+r(o.totalPrice.toFixed(2)),1)]),m(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.firstName=e),placeholder:"Voornaam"},null,512),[[u,o.firstName]]),m(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.lastName=e),placeholder:"Achternaam"},null,512),[[u,o.lastName]]),m(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.email=e),placeholder:"Email"},null,512),[[u,o.email]]),n("button",{onClick:t[3]||(t[3]=N((...e)=>o.submit&&o.submit(...e),["prevent"]))}," Bevestig Aankoop ")]),_:1})}const T=V(B,[["render",F]]);export{T as default};
