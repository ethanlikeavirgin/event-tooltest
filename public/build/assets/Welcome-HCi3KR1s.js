import{j as w,Z as k,d as C,T as $,q as h,e as n,b as u,a as e,w as f,F as b,N as S,o as a,h as v,g as x,t as l,i as g,l as D,x as L}from"./app-CTnjk_Gi.js";import{C as P}from"./Container-D--0Fdgv.js";import{_ as T}from"./AppLayout-DUzrsHeO.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={props:{items:Array,cart:Array,totalprice:Number},components:{Container:P,AppLayout:T,Link:w,Head:k},setup(){const _=C({}),t=$({price:"",item_id:"",name:"",counter:""});return{counters:_,form:t,submit:(o,r,d)=>{const i=_.value[o];if(!i){console.error(`Price is required for item ${r}`);return}t.item_id=o,t.name=r,t.price=d,t.counter=i,console.log(`Submitting for item: ${r} with price: ${d} and ID: ${o}`),t.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${r} was successful.`)}})},removecartitem:o=>{S.delete(route("purchase.destroy",{purchase:o}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${o} removed from cart`),onError:r=>console.error(r)})}}}},B={class:"py-32"},F={class:"relative"},N={class:"fixed right-4 top-14 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-lg h-1/2 overflow-scroll"},A={class:"p-4"},H={class:"flex items-center mb-4"},M=["src"],q={class:"ml-4"},E={class:"text-sm font-medium"},U={class:"text-xs text-gray-500"},W=["onClick"],I={class:"border-t border-gray-200 px-4 py-3"},R={class:"flex flex-wrap -mr-6"},Z={class:"mr-6 p-6 border border-black/20 rounded-3xl relative"},z={key:0},G=["src"],J={key:1},K=["onSubmit"],O={class:"flex flex-row gap-4"},Q=["onUpdate:modelValue"],X=["disabled"];function Y(_,t,p,c,o,r){const d=h("Head"),i=h("Link"),y=h("Container");return a(),n(b,null,[u(d,{title:"Welcome"}),e("div",B,[u(y,{class:"bg-gray-100 !py-4 p-10 rounded-3xl"},{default:f(()=>[t[2]||(t[2]=e("h1",{class:"text-4xl font-bold"},"Purchase Page",-1)),t[3]||(t[3]=e("div",{class:"pb-8"},"This is the purchase page content inside the container.",-1)),e("div",F,[e("div",N,[(a(!0),n(b,null,v(p.cart,s=>(a(),n("div",A,[e("div",H,[e("img",{src:`/storage/${s.items.file_path}`,class:"w-12 h-12 rounded-md"},null,8,M),e("div",q,[e("h3",E,l(s.name),1),e("p",U,l(s.counter)+" Ticket(s)",1),e("a",{onClick:g(m=>c.removecartitem(s.id),["prevent"]),class:"text-xs text-red-500 cursor-pointer"},"Remove",8,W)])])]))),256)),e("div",I,[u(i,{href:"/cart",class:"btn btn--primary"},{default:f(()=>t[0]||(t[0]=[x(" Checkout ")])),_:1})])])]),e("div",R,[(a(!0),n(b,null,v(p.items,s=>(a(),n("div",{class:"w-1/3",key:s},[e("div",Z,[u(i,{href:`/purchase/${s.id}`,class:"absolute -top-4 -right-4 border bg-black/20 border-black/20 w-10 h-10 flex items-center justify-center rounded-full"},{default:f(()=>t[1]||(t[1]=[e("span",{class:"material-symbols-outlined text-black/80"},"north_east",-1)])),_:2},1032,["href"]),s.file_path?(a(),n("div",z,[e("img",{src:`/storage/${s.file_path}`,alt:"Module Image",class:"h-40 w-full object-cover object-center rounded-3xl mb-4"},null,8,G)])):(a(),n("div",J," No image available ")),e("div",null,"Product: "+l(s.name),1),e("span",null,"Price: "+l(s.price),1),x(" "+l(s.max)+" ",1),e("form",{onSubmit:g(m=>c.submit(s.id,s.name,s.price),["prevent"]),class:"space-y-6"},[e("div",O,[D(e("input",{"onUpdate:modelValue":m=>c.counters[s.id]=m,id:"counter",type:"number",class:"w-full main--input"},null,8,Q),[[L,c.counters[s.id]]]),e("button",{disabled:c.form.processing,type:"submit",class:"btn btn--primary"},"Buy",8,X)])],40,K)])]))),128))])]),_:1})])],64)}const re=V(j,[["render",Y]]);export{re as default};
