import{j as y,Z as v,d as g,k as w,T as C,_ as T,o as c,e as i,a as o,t as u,f as h,b as x,w as b,F as k,h as S,g as A,a9 as D,a2 as F,i as L}from"./app-DSZRgF_7.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={props:{cart:Array,items:Array,totalprice:Number,guesttoken:String},components:{Link:y,Head:v},setup(m){const e=g(!1),l=()=>{e.value=!e.value},r=w(()=>{var s;return(s=m.cart)==null?void 0:s.reduce((n,d)=>n+Number(d.counter||0),0)}),_=g({}),a=C({price:"",item_id:"",name:"",counter:"",type:""});return{showCart:e,toggleCart:l,counters:_,form:a,submit:(s,n,d)=>{const f=_.value[s];if(!f){console.error(`Price is required for item ${n}`);return}a.item_id=s,a.name=n,a.price=d,a.counter=f,a.type="ticket",console.log(`Submitting for item: ${n} with price: ${d} and ID: ${s}`),a.post(route("purchase.store"),{forceFormData:!0,onFinish:()=>{console.log(`Purchase for ${n} was successful.`)}})},removecartitem:s=>{F.delete(route("purchase.destroy",{purchase:s}),{preserveScroll:!0,onSuccess:()=>console.log(`Item with ID ${s} removed from cart`),onError:n=>console.error(n)})},totalTickets:r}}},j={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center"},B={key:0,class:"fixed right-4 top-20 mt-2 w-72 h-fit bg-white border border-gray-200 rounded-[35px] shadow-lg z-[999]"},$={class:"p-4"},E={class:"flex items-center mb-4"},P={key:0},q=["src"],z={class:"ml-4"},H={class:"text-sm font-medium"},I={key:0},M={class:"text-xs text-gray-500"},R={key:1},Z={class:"text-xs text-gray-500"},G=["onClick"],J={class:"border-t border-gray-200 px-4 py-3"};function K(m,e,l,r,_,a){const p=T("Link");return c(),i(k,null,[o("a",{onClick:e[0]||(e[0]=(...t)=>r.toggleCart&&r.toggleCart(...t)),class:"fixed top-5 right-5 bg-white shadow-lg shadow-black/20 h-16 w-16 rounded-full flex items-center justify-center cursor-pointer"},[e[1]||(e[1]=o("span",{class:"material-symbols-outlined"},"shopping_basket",-1)),r.totalTickets>0?(c(),i("span",j,u(r.totalTickets),1)):h("",!0)]),x(D,{name:"fade-slide"},{default:b(()=>[r.showCart&&Array.isArray(l.cart)&&l.cart.length>0?(c(),i("div",B,[(c(!0),i(k,null,S(l.cart,t=>(c(),i("div",$,[o("div",E,[t.itemable.file_path?(c(),i("div",P,[o("img",{src:`/storage/${t.itemable.file_path}`,class:"w-12 h-12 rounded-md"},null,8,q)])):h("",!0),o("div",z,[o("h3",H,u(t.name),1),t.type=="plan"?(c(),i("div",I,[o("p",M,u(t.counter)+" Plan",1)])):(c(),i("div",R,[o("p",Z,u(t.counter)+" Ticket(s)",1)])),o("a",{onClick:L(s=>r.removecartitem(t.id),["prevent"]),class:"text-xs text-red-500 cursor-pointer"},"Remove",8,G)])])]))),256)),o("div",J,[x(p,{href:"/cart",class:"btn btn--primary w-fit"},{default:b(()=>e[2]||(e[2]=[A(" Checkout ")])),_:1})])])):h("",!0)]),_:1})],64)}const U=N(V,[["render",K],["__scopeId","data-v-48c1033c"]]);export{U as C};
